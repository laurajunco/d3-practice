<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Scales intro</title>
        <script type="text/javascript" src="/d3.js"></script>
    </head>
    
    <body>
        <script type="text/javascript">
        var w = 800;
        var h = 400;
        var padding = 20;
        var dataset = [
                        [   5,   20 ],
                        [ 480,   90 ],
                        [ 250,   50 ],
                        [ 100,   33 ],
                        [ 330,   95 ],
                        [ 410,   12 ],
                        [ 475,   44 ],
                        [  25,   67 ],
                        [  85,   21 ],
                        [ 220,   88 ],
                        [600, 150]
                      ];
        
        var xScale = d3.scaleLinear()
                .domain([0, d3.max(dataset, function(d) {
                    return d[0];
                })])
                .rangeRound([padding, w - padding*2])
                .clamp(true)
                .nice();
        
        var yScale = d3.scaleLinear()
            .domain([0, d3.max(dataset, function(d) { 
                return d[1]; 
            })])
            .rangeRound([h - padding, padding])
            .clamp(true)
            .nice();

        //radio scale
        var rScale = d3.scaleLinear()
            .domain([0, d3.max(dataset, function(d) { return d[1]; })])
            .rangeRound([2, 10])
            .clamp(true)
            .nice();

        //area scale
        var aScale = d3.scaleSqrt()
            .domain([0, d3.max(dataset, function(d) { return d[1]; })])
            .rangeRound([0, 10]);


        //Create SVG element
        var svg = d3.select("body")
            .append("svg")
            .attr("width", w)
            .attr("height", h);

        var circles = svg.selectAll("circle")
            .data(dataset)
            .enter()
            .append("circle")
            .attr('cx', function(d){
                return xScale(d[0]);
            })
            .attr('cy', function(d){
                return yScale(d[1]);
            })
            .attr('r', function(d){
                return aScale(d[1]);
            })
            .attr('fill', 'red');

        var labels = svg.selectAll("text")
            .data(dataset)
            .enter()
            .append("text")
            .text(function(d){
                return d[0] + ',' + d[1];
            })
            .attr("x", function(d) {
                return xScale(d[0]) + 7;
            })
            .attr("y", function(d) {
                return yScale(d[1]) + 3;
            })
            .attr("font-family", "sans-serif")
            .attr("font-size", "8px")
            .attr("fill", "blue")
            .attr("text-anchor", "left");
        
        </script>
    </body>
</html>